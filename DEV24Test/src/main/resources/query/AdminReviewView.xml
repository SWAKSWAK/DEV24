<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dev24.admin.review.dao.ReviewDaoAdmin">
	
	<!-- 리뷰 내용 조회 -->
	<select id="reviewList" parameterType="adminReview" resultType="adminReview">
		select re_num, c_num, c_id, c_nickname, b_num, b_name, pd_num, p_num, to_char(re_writedate, 'YYYY-MM-DD') re_writedate
		from review_view
		<where>
			<if test="date_start != ''">
				<![CDATA[(to_char(re_writedate, 'YYYY-MM-DD') between #{date_start} and #{date_end}) ]]>
				
				<if test="search=='re_num'">
					<![CDATA[AND (re_num LIKE '%'||#{keyword}||'%')]]>
				</if>
				<if test="search=='b_num'">
					<![CDATA[AND (b_num LIKE '%'||#{keyword}||'%')]]>
				</if>
				<if test="search=='b_name'">
					<![CDATA[AND (b_name LIKE '%'||#{keyword}||'%')]]>
				</if>
				<if test="search=='c_nickname'">
					<![CDATA[AND (c_nickname LIKE '%'||#{keyword}||'%')]]>
				</if>
				<if test="search=='p_num'">
					<![CDATA[AND (p_num LIKE '%'||#{keyword}||'%')]]>
				</if>
				
			</if>

		</where>
		
		order by re_num desc
		
	</select>

</mapper>
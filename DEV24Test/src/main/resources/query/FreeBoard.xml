<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dev24.client.freeboard.dao.FreeBoardDAO">
	<select id="freeboardList" parameterType="freeboard" resultType="freeboard">
		<!-- select fb_num, fb_author, fb_title, fb_readcnt, fb_content, 
		fb_writeday, c_num, fb_img_url, fb_readcnt from freeboard -->
		
		select fb_num, fb_author, fb_title, fb_readcnt, fb_content, 
		fb_writeday, c_num, fb_img_url, fb_readcnt, 
		(select count(fb_num) from freecmt where fb_num=freeboard.fb_num) as r_cnt        
		from freeboard order by fb_num desc
		
	</select>
	
	<update id="updateFBReadCount" parameterType="int">
		update freeboard set fb_readcnt = fb_readcnt+1 where fb_num=#{fb_num}
	</update>
	
	<select id="freeboardDetail" parameterType="freeboard" resultType="freeboard">
		select fb_num, fb_author, fb_title, fb_content, fb_img_url from freeboard where fb_num=#{fb_num}
	</select>
	
	<insert id="freeboardInsert" parameterType="freeboard">
		insert into freeboard 
		(fb_num, fb_author, fb_title, fb_readcnt, fb_content, fb_writeday, c_num)
		values 
		(fb_num_seq.nextval, #{fb_author}, #{fb_title}, 0, #{fb_content}, sysdate, #{c_num})
	</insert>
	
	<delete id="freeboardDelete" parameterType="freeboard">
		delete from freeboard where fb_num=#{fb_num}
	</delete>
	
	<!--  <update id="freeboardUpdate" parameterType="freeboard">
		update freeboard  set fb_title= #{fb_title} , fb_content=#{fb_content} where fb_num=#{fb_num}
	</update> -->
	
</mapper>